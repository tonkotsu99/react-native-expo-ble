# 可観測性要件

## 追加要件

### 要件: バックグラウンドイベント通知

システムは、デバッグモード時または重要な情報が必要な場合に、主要なバックグラウンドイベントに対してローカル通知をトリガーしなければならない（MUST）。

#### シナリオ: ジオフェンス進入

- **前提** アプリがバックグラウンドにある
- **もし** デバイスがジオフェンス領域に入った場合
- **ならば** 通知「Geofence Entered」が即座に表示される。

#### シナリオ: バックグラウンドスキャン実行

- **前提** バックグラウンドスキャンがトリガーされる（ジオフェンスまたは定期フェッチによる）
- **もし** スキャンが開始された場合
- **ならば** フォアグラウンドサービス通知「Scanning for beacons...」が表示される（Android 要件）。
- **かつ** （デバッグのみ）通知「Background Scan Started」が表示される。

#### シナリオ: 出席登録

- **前提** バックグラウンドスキャンがビーコンを検知した
- **もし** 出席 API 呼び出しが成功した場合
- **ならば** 通知「Attendance Recorded: [Device Name]」が表示される。

### 要件: ログ標準

バックグラウンドタスクは、一貫したプレフィックスを使用して実行フローをコンソールにログ出力しなければならない（MUST）。

#### シナリオ: ログプレフィックス

- **ジオフェンシング**: `[Geofencing Task]`
- **定期チェック**: `[Periodic Check]`
- **Android サービス**: `[Android Background]`
