# iOS バックグラウンド監視の検証

## 概要
iOS のバックグラウンド実行（ジオフェンシングおよび BLE スキャン）の検証を可能にするため、可観測性（ログ/通知）を強化し、構造化された手動テスト計画を提供します。

## 問題点
iOS のバックグラウンドタスク（ジオフェンシング、定期 BLE スキャン）は、ユーザーには見えない状態で実行されます。特定のログや通知がないと、以下の点を確認することが困難です：
1.  ジオフェンスの入退室イベントが正しくトリガーされているか。
2.  BLE スキャンが実際にバックグラウンドで実行されているか（`bluetooth-central` バックグラウンドモード）。
3.  出席登録が自動的に送信されているか。

## 解決策
1.  **可観測性の強化**: `tasks/geofencingTask.ts` および `tasks/periodicCheckTask.ts` が、主要なイベントに対して（デバッグビルドで）可視化された通知を送信するようにします（Android と同様の仕組みを iOS にも適用）。
    *   ジオフェンス入退室
    *   バックグラウンドスキャンの開始/停止
    *   ビーコン検知 / 出席登録成功
2.  **ドキュメント化**: 実機と Console.app/通知を使用してこれらの動作を検証する方法を詳述した `docs/IOS_BACKGROUND_TESTING.md` ガイドを作成します。
3.  **検証**: ユーザーがテスト計画を実行し、機能を確認します。

## 影響
- **ユーザー**: 本番環境の動作に変更はありません（デバッグ通知は条件付きであるべきです）。
- **開発者**: バックグラウンドロジックのデバッグが容易になります。
- **アーキテクチャ**: 構造的な変更はありません。ログ/通知の強化のみです。
